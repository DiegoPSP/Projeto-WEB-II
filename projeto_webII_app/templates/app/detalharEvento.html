{% extends 'app/base.html' %}

{% block content %}
    <div class="event-detail-container">
        {% if evento.banner_evento %}
            <img src="{{ evento.banner_evento.url }}" alt="Banner do evento {{ evento.titulo }}" class="event-banner">
        {% endif %}

        <h1 class="event-title">{{ evento.titulo }}</h1>

        <div class="event-info">
            <p><strong><i class="icon-calendar"></i> Quando:</strong> {{ evento.data_hora|date:"d/m/Y, \à\s H:i" }}</p>
            <p><strong><i class="icon-location"></i> Onde:</strong> {{ evento.local.nome }} ({{ evento.local.endereco }})</p>
            <p><strong><i class="icon-category"></i> Categoria:</strong> {{ evento.categoria.nome }}</p>
        </div>

        <div class="event-description">
            <h2>Sobre o Evento</h2>
            <p>{{ evento.descricao|linebreaks }}</p>
        </div>

        {% if evento.palestrantes.all %}
        <div class="event-speakers">
            <h2>Palestrantes</h2>
            <div class="speakers-list">
                {% for palestrante in evento.palestrantes.all %}
                    <div class="speaker-card">
                        {% if palestrante.foto %}
                            <img src="{{ palestrante.foto.url }}" alt="{{ palestrante.nome }}" class="speaker-photo">
                        {% endif %}
                        <strong>{{ palestrante.nome }}</strong>
                    </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <div class="event-subscription">
            {% if user.is_authenticated %}
                <div id="botao-inscricao">
                    {% if inscrito %}
                        {% include 'app/partials/botao_inscrito.html' %}
                    {% else %}
                        <button 
                            hx-post="{% url 'inscrever_evento' evento.id %}" 
                            hx-target="#botao-inscricao" 
                            hx-swap="outerHTML" 
                            hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                            class="btn-subscribe">
                            Inscrever-se neste evento
                        </button>
                    {% endif %}
                </div>
            {% else %}
                <p><a href="{% url 'login' %}">Faça login para se inscrever</a></p>
            {% endif %}
        </div>
    </div>
{% endblock %}