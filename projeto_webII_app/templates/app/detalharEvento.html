{% extends 'app/base.html' %}

{% block content %}
    {% if evento.banner_evento %}
        <img src="{{ evento.banner_evento.url }}" alt="{{ evento.titulo }}" class="event-banner">
    {% endif %}

    <h1>{{ evento.titulo }}</h1>
    <p><strong>Quando:</strong> {{ evento.data_hora|date:"d/m/Y H:i" }}</p>
    <p><strong>Onde:</strong> {{ evento.local.nome }} ({{ evento.local.endereco }})</p>
    <p>{{ evento.descricao }}</p>
    
    <h3>Palestrantes:</h3>
    <ul>
    {% for palestrante in evento.palestrantes.all %}
        <li>{{ palestrante.nome }}</li>
    {% endfor %}
    </ul>

    {% if user.is_authenticated %}
        <a href="{% url 'atualizarEvento' evento.id %}">Editar</a>
        <a href="{% url 'apagarEvento' evento.id %}" class="text-danger">Apagar</a>
    {% endif %}

    {% if user.is_authenticated %}
        <div id="botao-inscricao">
            
            {% if inscrito %}
                {% include 'core/partials/_botao_inscrito.html' %}
            
            {% else %}
                <button 
                    hx-post="{% url 'inscrever_evento' evento.id %}" 
                    hx-target="#botao-inscricao" 
                    hx-swap="outerHTML" 
                    hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                    class="btn-subscribe">
                    Inscrever-se neste evento
                </button>
            {% endif %}

        </div>
    {% else %}
        <p><a href="{% url 'login' %}">Fa√ßa login para se inscrever</a></p>
    {% endif %}
{% endblock %}